<%- include('../partials/header') %>
<%- include('./inc/modal_create') %>
<main class="container">
    <%- include('../partials/messages') %>
    <div class="d-flex justify-content-between align-items-center">
        <h1 class="h5 text-uppercase my-3">Bienes de la empresa</h1>
        <div>
            <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#modal_create_bien">Agregar
                Bien</button>
        </div>
    </div>
    <table class="table" id="bienes-table">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Código</th>
                <th>Categoria</th>
                <th>Gerencia</th>
                <th>Departamento</th>
                <th>Ubicación</th>
                <th>Fecha de ingreso</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <% if (bienes.length) { %>
            <% bienes.forEach(bien => {%>
            <tr>
                <td><%= bien.nombre %></td>
                <td>
                    <span class="text-truncate d-inline-block" style="width: 200px;">
                        <%= bien.codigo %>
                    </span>
                </td>
                <td>
                    <span class="badge bg-secondary">
                        <%= bien.categoria %>
                    </span>
                </td>
                <td><%= bien.gerencia %></td>
                <td><%= bien.departamento %></td>
                <td><%= bien.ubicacion %></td>
                <td>
                    <%= new Date(bien.fecha_ingreso).toLocaleDateString('es-vn', { weekday:"long", year:"numeric", month:"short", day:"numeric"}) %>
                </td>
                <td>
                    <form action="/bienes/delete/<%= bien.id %>" method="post" class="d-inline-block">
                        <button type="submit" class="btn btn-danger btn-sm">Eliminar</button>
                    </form>
                    <a href="/bienes/actualizar/<%= bien.id %>" class="btn btn-warning btn-sm">Actualizar / Ver</a>
                </td>
            </tr>
            <%}) %>
            <% } else { %>
            <tr>
                <td colspan="7">
                    <div class="alert alert-info m-0">Aún no hay bienes registrados.</div>
                </td>
            </tr>
            <% } %>
        </tbody>
    </table>
</main>
<%- include('../partials/footer') %>